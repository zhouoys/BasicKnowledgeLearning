# 本地存储

![image-20200428125836489](本地存储.assets/image-20200428125836489.png)





![image-20200428125851462](本地存储.assets/image-20200428125851462.png)



## 1.本地存储

![image-20200428125951510](本地存储.assets/image-20200428125951510.png)

本地存储特点:

1.设置，读取方便，甚至页面刷新不丢失数据（sessionStorage、localStorage);

2.容量大，sessionStorage约有5M,localStorage约有20M

3.只能存储字符串，可以将对象JSON.stringify()编码后保存。



![image-20200502114359962](本地存储.assets/image-20200502114359962.png)



![image-20200502181922586](本地存储.assets/image-20200502181922586.png)



测试可以发现:   www.todolist.cn,采用的是localStorage方法，将数据保存到浏览器中。基本上相当于永久保存

## 2.window.sessionStorage

![image-20200428130056001](本地存储.assets/image-20200428130056001.png)

特点:

1.生命周期为关闭浏览器窗口。

2.在同一个窗口（页面）下数据可以共享。

3.以键值对的形式存储使用。



![image-20200502115340622](本地存储.assets/image-20200502115340622.png)





![image-20200502114808389](本地存储.assets/image-20200502114808389.png)



![image-20200502143309226](本地存储.assets/image-20200502143309226.png)





~~~ html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <input type="text" name = 'uname' class="text" placeholder="输入数据"/>
    <button class="set">存入数据</button>
    <button class="get">获取数据</button>
    <button class="remove">删除数据</button>
    <button class="clear-all">清除所有数据</button>
    <div>
        <input type="text" class="show" placeholder="显示数据"/>
    </div>
</body>
<script>
    // 获取text
    var text = document.querySelector('.text')
    var showText = document.querySelector('.show')
    // 存入数据(存入，以及修改,key值相同)
    var set  = document.querySelector('.set');
    set.addEventListener('click',function(){
        // 存入sesseionStorage.setItem
        window.sessionStorage.setItem('uname',text.value);
        window.sessionStorage.setItem('pwd',text.value);
        window.sessionStorage.setItem('cardID',text.value);
    })
    // 获取数据
    var get = document.querySelector('.get')
    get.addEventListener('click',function(){
        //获取数据
        var temp = window.sessionStorage.getItem('uname');
        // 赋值
        showText.value  = temp;
    })
    // 删除数据
    var remove = document.querySelector('.remove')
    remove.addEventListener('click',function(){
        window.sessionStorage.removeItem('uname');
    })
    // 删除所有的数据
    var clearAll = document.querySelector('.clear-all');
    clearAll.addEventListener('click',function(){
        // 清除所有的数据
        window.sessionStorage.clear();

    })
</script>
</html>
~~~





## 3.window.localStorage

![image-20200428130226516](本地存储.assets/image-20200428130226516.png)



window.localStorage

1.声明周期永久生效，除非手动删除，否则关闭页面也会存在

2.可以多窗口（页面） 共享（同一个浏览器可以共享）

3.以键值对的形式存储使用



~~~html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <input type="text" name = 'uname' class="text" placeholder="输入数据"/>
    <button class="set">存入数据</button>
    <button class="get">获取数据</button>
    <button class="remove">删除数据</button>
    <button class="clear-all">清除所有数据</button>
    <div>
        <input type="text" class="show" placeholder="显示数据"/>
    </div>
</body>
<script>
    // 获取text
    var text = document.querySelector('.text')
    var showText = document.querySelector('.show')
    // 存入数据(存入，以及修改,key值相同)
    var set  = document.querySelector('.set');
    set.addEventListener('click',function(){
        // 存入sesseionStorage.setItem
        window.localStorage.setItem('uname',text.value);
        window.localStorage.setItem('pwd',text.value);
        window.localStorage.setItem('cardID',text.value);
    })
    // 获取数据
    var get = document.querySelector('.get')
    get.addEventListener('click',function(){
        //获取数据
        var temp = window.localStorage.getItem('uname');
        // 赋值
        showText.value  = temp;
    })
    // 删除数据
    var remove = document.querySelector('.remove')
    remove.addEventListener('click',function(){
        window.localStorage.removeItem('uname');
    })
    // 删除所有的数据
    var clearAll = document.querySelector('.clear-all');
    clearAll.addEventListener('click',function(){
        // 清除所有的数据
        window.localStorage.clear();

    })
</script>
</html>
~~~







## 案例：记住用户名

![image-20200428130333681](本地存储.assets/image-20200428130333681.png)



![image-20200428130526478](本地存储.assets/image-20200428130526478.png)



~~~html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div>
        <label for="userName">用户名:</label>
        <input type="text" name = 'userName' id="userName" />
    </div>
    <div>
        <label for="userPwd">密码:</label>
        <input type="password" name = 'userPwd' id="userPwd" />
    </div>
    <input type="checkbox" id = 'remeber' name = 'remeber'>
    <label for="remeber">记住用户名，密码。</label>
</body>
<script>
    var userName = document.querySelector('#userName');
    var userPwd = document.querySelector('#userPwd');
    var radio = document.querySelector('#remeber')
    if(window.localStorage.getItem('userName')){
        userName.value = window.localStorage.getItem('userName');
        userPwd.value  = window.localStorage.getItem('userPwd');
        radio.checked = true;
    }
    // 监听radin改变事件
    radio.addEventListener('change',function(){
        if(this.checked){
            window.localStorage.setItem('userName',userName.value);
            window.localStorage.setItem('userPwd',userPwd.value);
        } else {
            window.localStorage.removeItem('userName');
            window.localStorage.removeItem('userPwd');
        }
    })
</script>
</html>
~~~

